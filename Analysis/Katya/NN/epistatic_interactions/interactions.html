<!DOCTYPE html>
<meta charset="utf-8">
<style>

.links line {
  stroke: #aaa;
}

.nodes circle {
  pointer-events: all;
  stroke: none;
  stroke-width: 40px;
}

</style>
<head>
</head>

<body>
<div id="chart" style="text-align: center;"></div> 

<script src="https://d3js.org/d3.v4.min.js"></script>
<script>
var margin = {
        top: 10,
        right: 10,
        bottom: 20,
        left: 10
      };

var width = 1600;
var height = 400;
      
//SVG container
var svg = d3.select('#chart')
  .append("svg")
  .attr("width", width - margin.left - margin.right)
  .attr("height", height + margin.top + margin.bottom);


d3.json("interactions.json", function(error, graph) {
  if (error) throw error;

  var link = svg.append("g")
      .attr("class", "links")
    .selectAll("line")
    .data(graph.links)
    .enter()
    .append("line")
      .attr("x1", function(d) { return d.x1; })
      .attr("y1", function(d) { return height - d.y1; })
      .attr("x2", function(d) { return d.x2; })
      .attr("y2", function(d) { return height - d.y2; })
      .style('opacity',0.5)
      .style('stroke-width',function(d) {
        return d.value > 1? 0.5 : 0;
    })
      .style('stroke', function(d) {return d.color});

  var node = svg.append("g")
      .attr("class", "nodes")
    .selectAll("circle")
    .data(graph.nodes)
    .enter()
    .append("circle")
      .attr('fixed', true)
      .attr("r", 7)
      .attr('opacity', 1)
      .attr('fill', function(d){
        return d.color;
      })
      .attr('cx', function(d) { return d.x; })
      .attr('cy', function(d) { return height - d.y; })


    .append("title")
    .text(function(d) {
      return d.id;
    });

         
svg.selectAll("text")
   .data(graph.nodes)
   .enter()
   .append("text")
   .text(function(d) {
        return d.id;
   })   
   .attr("x", function(d) {
        return d.x - 7;
   })
   .attr("y", function(d) {
        return d.id.length > 3? height - d.y + 20 : height - d.y - 14;
   })
   .attr("font-family", "sans-serif")
   .attr("font-size", "11px")
   .attr("fill", function(d) {
        return d.color;
   });


});

</script>

</body>